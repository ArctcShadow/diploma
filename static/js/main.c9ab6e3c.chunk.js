(window["webpackJsonpkanban-board-app"]=window["webpackJsonpkanban-board-app"]||[]).push([[0],{170:function(e,a,t){e.exports=t(217)},185:function(e,a,t){},188:function(e,a,t){},189:function(e,a,t){},215:function(e,a,t){},216:function(e,a,t){},217:function(e,a,t){"use strict";t.r(a);var r=t(12),n=t.n(r),o=t(20),c=t(0),i=t.n(c),s=t(14),l=t.n(s),d=t(18),u=t(82),m=t(85),p=t(151),f=window.location.pathname.replace(/\//g,"_");m.a.plugin(p.a);var g=null,b=null,h=new m.a("kanban-board-v1@".concat(f),{auto_compaction:!0}),v=new m.a("kanban-board-config-v1@".concat(f),{auto_compaction:!0});function y(){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(n.a.mark((function e(){var a,t,r,o,c,i,s,l,d,u,m,p,f,v,y;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=53;break}return e.next=3,h.allDocs({});case 3:if(a=e.sent,!g){e.next=10;break}return e.next=7,g.allDocs({});case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=null;case 11:for(t=e.t0,r=new Set,o=!0,c=!1,i=void 0,e.prev=16,s=a.rows[Symbol.iterator]();!(o=(l=s.next()).done);o=!0)d=l.value,r.add(d.id);e.next=24;break;case 20:e.prev=20,e.t1=e.catch(16),c=!0,i=e.t1;case 24:e.prev=24,e.prev=25,o||null==s.return||s.return();case 27:if(e.prev=27,!c){e.next=30;break}throw i;case 30:return e.finish(27);case 31:return e.finish(24);case 32:if(!t){e.next=52;break}for(u=!0,m=!1,p=void 0,e.prev=36,f=t.rows[Symbol.iterator]();!(u=(v=f.next()).done);u=!0)y=v.value,r.add(y.id);e.next=44;break;case 40:e.prev=40,e.t2=e.catch(36),m=!0,p=e.t2;case 44:e.prev=44,e.prev=45,u||null==f.return||f.return();case 47:if(e.prev=47,!m){e.next=50;break}throw p;case 50:return e.finish(47);case 51:return e.finish(44);case 52:b=h.sync(g,{live:!0,retry:!0,doc_ids:Array.from(r.values())}).on("change",(function(e){})).on("paused",(function(e){})).on("active",(function(e){})).on("complete",(function(e){})).on("error",(function(e){}));case 53:case"end":return e.stop()}}),e,null,[[16,20,24,32],[25,,27,31],[36,40,44,52],[45,,47,51]])})))).apply(this,arguments)}function k(){return S.apply(this,arguments)}function S(){return(S=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){try{b.cancel()}catch(a){}b=null}return e.next=3,y();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,a,t){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(n.a.mark((function e(a,t,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){try{b.cancel()}catch(n){}b=null}if(!g){e.next=10;break}return e.prev=2,e.next=5,g.close();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:g=null;case 10:if(!a||!a.match(/^https?:\/\//)){e.next=14;break}return g=new m.a(a,{auth:{username:t,password:r}}),e.next=14,y();case 14:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function B(){return h}t(185);var x=t(74),A=t(271),D=t(138),C=t(272),j=t(2),T=t(150),N=t(250),I=t(102),_=window.matchMedia("(prefers-color-scheme: dark)").matches,F=Object(T.a)({palette:_?{type:"dark",primary:{main:N.a[500]},secondary:{main:I.a[500]}}:{type:"light",primary:{main:N.a[500]},secondary:{main:I.a[500]}}}),L=t(68),M=t.n(L),U=M()(),V=U.async("ACTIONS_UPDATE_APP_CONFIG"),P=U.async("ACTIONS_RESET_APPLICATION"),W={showAlertDialog:U("ACTIONS_SHOW_ALERT_DIALOG"),closeAlertDialog:U("ACTIONS_CLOSE_ALERT_DIALOG"),startUpdateAppConfig:V.started,doneUpdateAppConfig:V.done,failedUpdateAppConfig:V.failed,startResetApplication:P.started,doneResetApplication:P.done,failedResetApplication:P.failed};function Y(e){return{showAlertDialog:function(a){return e(W.showAlertDialog(a))},closeAlertDialog:function(){return e(W.closeAlertDialog())},updateAppConfig:function(a){return e(W.startUpdateAppConfig(a))},resetApplication:function(){return e(W.startResetApplication())}}}function K(e){return Object.assign({},e.appEvents)}var H=t(13),R=t(56),z=t(276),$=t(264),G=t(263),X=t(96),J=t.n(X),q=t(97),Q=t.n(q),Z=t(98),ee=t.n(Z),ae=t(141),te=t.n(ae),re=t(99),ne=t.n(re),oe=t(142),ce=t.n(oe),ie=t(143),se=t.n(ie),le=t(139),de=t.n(le),ue=t(140),me=t.n(ue),pe=t(266),fe=t(260),ge=t(265),be=t(220),he=t(268),ve=t(267),ye=M()(),Ee=ye.async("ACTIONS_ADD_BOARD"),ke=ye.async("ACTIONS_CHANGE_ACTIVE_BOARD"),Se=ye.async("ACTIONS_UPDATE_BOARD_NAME"),we=ye.async("ACTIONS_DELETE_BOARD"),Oe=ye.async("ACTIONS_ADD_STIKEY"),Be=ye.async("ACTIONS_UPDATE_STIKEY"),xe=ye.async("ACTIONS_UPDATE_STIKEY_LANES"),Ae=ye.async("ACTIONS_ARCHIVE_STIKEY"),De=ye.async("ACTIONS_DELETE_STIKEY"),Ce=ye.async("ACTIONS_EDIT_BOARD_AND_STIKEYS"),je={startAddBoard:Ee.started,doneAddBoard:Ee.done,failedAddBoard:Ee.failed,startChangeActiveBoard:ke.started,doneChangeActiveBoard:ke.done,failedChangeActiveBoard:ke.failed,startUpdateBoardName:Se.started,doneUpdateBoardName:Se.done,failedUpdateBoardName:Se.failed,startDeleteBoard:we.started,doneDeleteBoard:we.done,failedDeleteBoard:we.failed,startAddStikey:Oe.started,doneAddStikey:Oe.done,failedAddStikey:Oe.failed,startUpdateStikey:Be.started,doneUpdateStikey:Be.done,failedUpdateStikey:Be.failed,startUpdateStikeyLanes:xe.started,doneUpdateStikeyLanes:xe.done,failedUpdateStikeyLanes:xe.failed,startArchiveStikey:Ae.started,doneArchiveStikey:Ae.done,failedArchiveStikey:Ae.failed,startDeleteStikey:De.started,doneDeleteStikey:De.done,failedDeleteStikey:De.failed,startEditBoardAndStikeys:Ce.started,doneEditBoardAndStikeys:Ce.done,failedEditBoardAndStikeys:Ce.failed};function Te(e){return{addBoard:function(a){return e(je.startAddBoard({boardName:a}))},changeActiveBoard:function(a){return e(je.startChangeActiveBoard({boardId:a}))},updateBoardName:function(a){return e(je.startUpdateBoardName(a))},deleteBoard:function(a){return e(je.startDeleteBoard({boardId:a}))},addStikey:function(){return e(je.startAddStikey({}))},updateStikey:function(a){return e(je.startUpdateStikey(a))},updateStikeyLanes:function(a){return e(je.startUpdateStikeyLanes(a))},archiveStikey:function(a){return e(je.startArchiveStikey({kanbanId:a}))},deleteStikey:function(a){return e(je.startDeleteStikey({kanbanId:a}))},editBoardAndStikeys:function(a){return e(je.startEditBoardAndStikeys(a))},showAlertDialog:function(a){return e(W.showAlertDialog(a))},closeAlertDialog:function(){return e(W.closeAlertDialog())}}}function Ne(e){return Object.assign({},e.kanbanBoard)}var Ie=t(262),_e=t(275),Fe=t(251),Le=t(261),Me=t(255),Ue=t(256),Ve=t(254),Pe=t(41),We=t.n(Pe),Ye=t(71),Ke=t.n(Ye),He=t(32),Re=0;function ze(){return"$$gensym$$_xjKvAjFXoVtro45V_".concat(Re++,"$$")}var $e=function(e){var a=Object(He.a)(),t=i.a.useState(e.open),r=Object(H.a)(t,2),n=r[0],o=r[1],c=i.a.useState(e.value),s=Object(H.a)(c,2),l=s[0],d=s[1],u=ze();function m(){o(!1),e.onClose(!1)}return i.a.createElement(Fe.a,{open:n,onClose:m,"aria-labelledby":u},i.a.createElement(Ve.a,{id:u},e.title),i.a.createElement(Me.a,null,e.message?i.a.createElement(Ue.a,null,e.message):i.a.createElement(i.a.Fragment,null),i.a.createElement(_e.a,{autoFocus:!0,margin:"dense",label:e.fieldLabel,fullWidth:!0,value:l,error:!!e.validator&&e.validator(l),onChange:function(e){d(e.target.value)}})),i.a.createElement(Le.a,null,i.a.createElement(Ie.a,{variant:"outlined",color:"default",onClick:m},i.a.createElement(Ke.a,null),i.a.createElement("span",{style:{marginLeft:a.spacing(1)}}),e.cancelButtonCaption||"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438"),i.a.createElement(Ie.a,{variant:"contained",color:e.colorIsSecondary?"secondary":"primary",disabled:!!e.validator&&e.validator(l),onClick:function(){o(!1),e.onClose(!0,l)}},i.a.createElement(We.a,null),i.a.createElement("span",{style:{marginLeft:a.spacing(1)}}),e.applyButtonCaption||"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438")))},Ge=Object(D.a)((function(e){return{drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(R.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(6)+1},e.breakpoints.up("sm"),{width:e.spacing(6)+1}),nested:{paddingLeft:e.spacing(4)}}})),Xe=Object(x.e)(Object(d.c)(Ne,Te)((function(e){var a,t,r=Ge(),n=i.a.useState(!0),o=Object(H.a)(n,2),c=o[0],s=o[1],l=i.a.useState({open:!1,title:"",message:"",fieldLabel:"",value:"",validator:function(e){return e.trim().length<=0},onClose:function(a,t){m(Object.assign({},u,{open:!1})),a&&t&&e.addBoard(t)}}),d=Object(H.a)(l,2),u=d[0],m=d[1],p=i.a.useState(!0),f=Object(H.a)(p,2),g=f[0],b=f[1];function h(a,t){t===e.activeBoardId&&e.history.push("/".concat(a,"/").concat(t))}var v="";return e.history.location.pathname&&(e.history.location.pathname.startsWith("/kanban/")?v="kanban":e.history.location.pathname.startsWith("/calendar/")?v="calendar":e.history.location.pathname.startsWith("/edit/")?v="edit":e.history.location.pathname.startsWith("/config/")&&(v="config")),i.a.createElement(i.a.Fragment,null,i.a.createElement(z.a,{variant:"permanent",className:Object(j.a)(r.drawer,(a={},Object(R.a)(a,r.drawerOpen,c),Object(R.a)(a,r.drawerClose,!c),a)),classes:{paper:Object(j.a)((t={},Object(R.a)(t,r.drawerOpen,c),Object(R.a)(t,r.drawerClose,!c),t))},anchor:"left",open:c},i.a.createElement("div",{className:""},i.a.createElement(G.a,{onClick:function(){s(!c)}},c?i.a.createElement(J.a,null):i.a.createElement(Q.a,null))),i.a.createElement($.a,null),c?i.a.createElement(i.a.Fragment,null,i.a.createElement(fe.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:i.a.createElement(ge.a,{component:"div",id:"nested-list-subheader"},"\u0414\u043e\u0448\u043a\u0438")},i.a.createElement(be.a,{button:!0,onClick:function(){b(!g)}},g?i.a.createElement(de.a,null):i.a.createElement(me.a,null)),i.a.createElement(pe.a,{in:g,timeout:"auto",unmountOnExit:!0},i.a.createElement(fe.a,{component:"div",disablePadding:!0},e.boards.map((function(a){return i.a.createElement(be.a,{button:!0,key:a._id,selected:a._id===e.activeBoardId,className:Object(j.a)(r.nested),style:{fontWeight:a._id===e.activeBoardId?"bold":"normal"},onClick:function(t){return function(a){var t="kanban";e.history.location.pathname&&(e.history.location.pathname.startsWith("/calendar/")?t="calendar":e.history.location.pathname.startsWith("/edit/")&&(t="edit")),e.history.push("/".concat(t,"/").concat(a))}(a._id)}},i.a.createElement(ve.a,{primary:a.name}))}))))),i.a.createElement(be.a,{button:!0,onClick:function(){m(Object.assign({},u,{open:!0,title:"\u041d\u043e\u0432\u0430 \u0434\u043e\u0448\u043a\u0430",message:"",fieldLabel:"\u041d\u0430\u0437\u0432\u0430 \u0434\u043e\u0448\u043a\u0438",value:""}))}},i.a.createElement(he.a,null,i.a.createElement(ee.a,null)),i.a.createElement(ve.a,{primary:"\u041d\u043e\u0432\u0430 \u0434\u043e\u0448\u043a\u0430.."})),i.a.createElement($.a,null)):i.a.createElement(i.a.Fragment,null),i.a.createElement(fe.a,null,i.a.createElement(be.a,{button:!0,selected:"kanban"===v||""===v,onClick:function(a){return h("kanban",e.activeBoardId)}},i.a.createElement(he.a,null,i.a.createElement(te.a,null)),c?i.a.createElement(ve.a,{primary:"\u0420\u043e\u0431\u043e\u0447\u0430 \u0437\u043e\u043d\u0430"}):i.a.createElement(i.a.Fragment,null)),i.a.createElement(be.a,{button:!0,selected:"calendar"===v,onClick:function(a){return h("calendar",e.activeBoardId)}},i.a.createElement(he.a,null,i.a.createElement(ne.a,null)),c?i.a.createElement(ve.a,{primary:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440"}):i.a.createElement(i.a.Fragment,null)),i.a.createElement(be.a,{button:!0,selected:"edit"===v,onClick:function(a){return h("edit",e.activeBoardId)}},i.a.createElement(he.a,null,i.a.createElement(ce.a,null)),c?i.a.createElement(ve.a,{primary:"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440"}):i.a.createElement(i.a.Fragment,null))),c?i.a.createElement(i.a.Fragment,null,i.a.createElement($.a,null),i.a.createElement(be.a,{button:!0,selected:"config"===v,onClick:function(a){return e.history.push("/config/")}},i.a.createElement(he.a,null,i.a.createElement(se.a,null)),c?i.a.createElement(ve.a,{primary:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f"}):i.a.createElement(i.a.Fragment,null))):i.a.createElement(i.a.Fragment,null)),u.open?i.a.createElement($e,{open:!0,title:u.title,message:u.message,fieldLabel:u.fieldLabel,value:u.value,validator:u.validator,onClose:u.onClose}):i.a.createElement(i.a.Fragment,null))}))),Je=t(77),qe=t(145),Qe=t.n(qe),Ze=t(149);function ea(e){return"".concat(String(e.getFullYear()).padStart(4,"0"),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))}function aa(e){var a=e.match(/^(?:(-?\d{4,})-(\d{2})-(\d{2}))|(?:(-?\d{4,})(\d{2})(\d{2}))$/);return a?new Date(Number(a[1]),Number(a[2])-1,Number(a[3])):null}var ta=t(148),ra=t(28),na=t(273),oa=t(274),ca=t(269),ia=t(277),sa=t(259),la=t(270),da=t(113),ua=t.n(da),ma=t(49),pa=t.n(ma),fa=function(e){var a=Object(He.a)(),t=i.a.useState(e.open),r=Object(H.a)(t,2),n=r[0],o=r[1],c=i.a.useState(""),s=Object(H.a)(c,2),l=s[0],d=s[1],u=ze();function m(){o(!1),e.onClose(!1)}return i.a.createElement(Fe.a,{open:n,onClose:m,"aria-labelledby":u},e.fab?e.fab:i.a.createElement(i.a.Fragment,null),i.a.createElement(Ve.a,{id:u,style:{textAlign:"center"}},e.title),i.a.createElement(Me.a,null,i.a.createElement(Ue.a,{style:{textAlign:"center"}},(e.message||"").split("\n").map((function(e,a,t){return i.a.createElement("span",{key:"content-"+a},e,a<=t.length-1?i.a.createElement("br",null):i.a.createElement(i.a.Fragment,null))})))),e.confirmingTextValue?i.a.createElement(_e.a,{autoFocus:!0,margin:"dense",label:e.confirmingTextLabel,value:l,onChange:function(e){d(e.target.value)},style:{marginLeft:a.spacing(1),marginRight:a.spacing(1),marginBottom:a.spacing(1)}}):i.a.createElement(i.a.Fragment,null),i.a.createElement(Le.a,{style:{margin:"auto"}},e.singleButton?i.a.createElement(i.a.Fragment,null):i.a.createElement(Ie.a,{variant:"outlined",color:"default",onClick:m},i.a.createElement(Ke.a,null),i.a.createElement("span",{style:{marginLeft:a.spacing(1)}}),e.cancelButtonCaption||"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438"),i.a.createElement(Ie.a,{variant:"contained",color:e.colorIsSecondary?"secondary":"primary",disabled:!!e.confirmingTextValue&&l!==e.confirmingTextValue,onClick:function(){e.confirmingTextValue&&e.confirmingTextValue!==l||(o(!1),e.onClose(!0))}},i.a.createElement(We.a,null),i.a.createElement("span",{style:{marginLeft:a.spacing(1)}}),e.applyButtonCaption||"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438")))},ga=t(76),ba=t(152),ha=Object(ba.a)({rawToToken:function(e){return e},concatTokens:function(e){return e.length?[e.reduce((function(e,a){return e+a}))]:[]}}),va=ha.seq,ya=ha.cls,Ea=ha.notCls,ka=ha.classes,Sa=ha.cat,wa=ha.repeat,Oa=ha.end,Ba=ha.first,xa=ha.combine,Aa=ha.erase,Da=ha.trans,Ca=ha.ahead,ja=Da((function(e){return e.length?e:[""]}))(Aa(wa(ka.spaceWithinSingleLine),ya('"')),Sa(wa(Ba(Da((function(e){return['"']}))(va('""')),Ea('"')))),Aa(ya('"'),wa(Aa(ka.spaceWithinSingleLine)))),Ta=Da((function(e){return e.length?e:[""]}))(Aa(wa(ka.spaceWithinSingleLine)),Sa(wa(Ba(Aa(ka.spaceWithinSingleLine,Ca(ya(",","\r\n","\n","\r"))),Ea(",","\r\n","\n","\r"))))),Na=Ba(ja,Ta),Ia=Da((function(e){return[e]}))(Na,wa(xa(Aa(va(",")),Na))),_a=xa(Ia,wa(xa(Aa(ka.newline),Ia)),Oa());function Fa(e){var a=_a(Object(ga.b)(e));if(!a.succeeded)throw new Error(a.message);return a.tokens}var La=Object(D.a)((function(e){return{formControl:{minWidth:220},icon:{margin:e.spacing(1),fontSize:26},fabDelete:{position:"absolute",margin:e.spacing(1),right:e.spacing(1),top:e.spacing(1)}}})),Ma=function(e){var a=La(),t=Object(He.a)(),r=i.a.useState(e.open),n=Object(H.a)(r,2),o=n[0],c=n[1],s=i.a.useState(!1),l=Object(H.a)(s,2),d=l[0],u=l[1],m=i.a.useState(e.record.description),p=Object(H.a)(m,2),f=p[0],g=p[1],b=i.a.useState(e.record.barcode),h=Object(H.a)(b,2),v=h[0],y=h[1],E=i.a.useState(e.record.memo),k=Object(H.a)(E,2),S=k[0],w=k[1],O=i.a.useState(e.record.tags?e.record.tags.map((function(e){return e.includes(",")?'"'.concat(e.replace(/"/g,'""'),'"'):e})).join(", "):""),B=Object(H.a)(O,2),x=B[0],A=B[1],D=i.a.useState(e.record.flags?e.record.flags.map((function(e){return e.includes(",")?'"'.concat(e.replace(/"/g,'""'),'"'):e})).join(", "):""),C=Object(H.a)(D,2),T=C[0],N=C[1],I=i.a.useState(aa(e.record.dueDate)),_=Object(H.a)(I,2),F=_[0],L=_[1],M=i.a.useState(e.record.taskStatus),U=Object(H.a)(M,2),V=U[0],P=U[1],W=i.a.useState(e.record.teamOrStory),Y=Object(H.a)(W,2),K=Y[0],R=Y[1],z=ze(),$=ze(),G=ze();function X(){c(!1),e.onCancel()}function J(e){A(e.target.value)}function q(e){N(e.target.value)}return i.a.createElement(i.a.Fragment,null,i.a.createElement(Fe.a,{open:o,onClose:X,"aria-labelledby":z},i.a.createElement(Ve.a,{id:z,style:{paddingBottom:"0"}},"\u0417\u043c\u0456\u043d\u0438\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f",i.a.createElement(Ie.a,{className:Object(j.a)(a.fabDelete),variant:"outlined",color:"default",onClick:function(){u(!0)}},e.board.preferArchive?i.a.createElement(ua.a,null):i.a.createElement(pa.a,{color:"secondary"}),i.a.createElement(Je.a,{variant:"body1",color:e.board.preferArchive?"initial":"secondary",style:{marginLeft:t.spacing(1)}},e.board.preferArchive?"\u0410\u0440\u0445\u0456\u0432\u0443\u0432\u0430\u0442\u0438":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"))),i.a.createElement(Me.a,null,i.a.createElement(ra.a,{utils:ta.a},i.a.createElement("div",null,i.a.createElement(_e.a,{margin:"dense",label:"\u041e\u043f\u0438\u0441",multiline:!0,rows:4,rowsMax:16,fullWidth:!0,value:f,onChange:function(e){g(e.target.value)},helperText:"M\u043e\u0436\u043d\u0430 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0432\u0430\u0442\u0438 Markdown"})),i.a.createElement("div",null,i.a.createElement(na.a,{margin:"dense",label:"\u041a\u0456\u043d\u0446\u0435\u0432\u0430 \u0434\u0430\u0442\u0430",format:"yyyy-MM-dd",KeyboardButtonProps:{"aria-label":"change date"},value:F,onChange:function(e){L(e)}})),i.a.createElement("div",null,i.a.createElement(sa.a,{className:Object(j.a)(a.formControl),style:{marginTop:"5px"}},i.a.createElement(ia.a,{htmlFor:$},"\u0421\u0442\u0430\u0442\u0443\u0441"),i.a.createElement(oa.a,{value:V,onChange:function(e){e.target.name&&P(e.target.value)},inputProps:{name:"taskStatus",id:$}},e.taskStatuses.map((function(e){return i.a.createElement(ca.a,{key:e.value,value:e.value},e.caption||e.value)})))),i.a.createElement(sa.a,{className:Object(j.a)(a.formControl),style:{marginLeft:t.spacing(1),marginTop:"5px"}},i.a.createElement(ia.a,{htmlFor:G},"\u041a\u043e\u043c\u0430\u043d\u0434\u0430 / \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"),i.a.createElement(oa.a,{value:K,onChange:function(e){e.target.name&&R(e.target.value)},inputProps:{name:"teamOrStory",id:G}},e.teamOrStories.map((function(e){return i.a.createElement(ca.a,{key:e.value,value:e.value},e.caption||e.value)}))))),e.board.displayTags&&e.board.displayFlags?i.a.createElement("div",null,i.a.createElement(sa.a,{className:Object(j.a)(a.formControl),style:{marginTop:"5px"}},i.a.createElement(_e.a,{margin:"dense",label:"\u041f\u043e\u0437\u043d\u0430\u0447\u043a\u0438",value:x,onChange:J,helperText:"\u0420\u043e\u0437\u0434\u0456\u043b\u044f\u0442\u0438 \u043a\u043e\u043c\u0430\u043c\u0438 (CSV \u0441\u0438\u043d\u0442\u0430\u043a\u0441)"})),i.a.createElement(sa.a,{className:Object(j.a)(a.formControl),style:{marginLeft:t.spacing(1),marginTop:"5px"}},i.a.createElement(_e.a,{margin:"dense",label:"\u041c\u0456\u0442\u043a\u0438",value:T,onChange:q,helperText:"\u0420\u043e\u0437\u0434\u0456\u043b\u044f\u0442\u0438 \u043a\u043e\u043c\u0430\u043c\u0438 (CSV \u0441\u0438\u043d\u0442\u0430\u043a\u0441)"}))):i.a.createElement(i.a.Fragment,null),e.board.displayTags&&!e.board.displayFlags?i.a.createElement("div",null,i.a.createElement(_e.a,{margin:"dense",label:"\u041c\u0456\u0442\u043a\u0438",fullWidth:!0,value:x,onChange:J,helperText:"\u0420\u043e\u0437\u0434\u0456\u043b\u044f\u0442\u0438 \u043a\u043e\u043c\u0430\u043c\u0438 (CSV \u0441\u0438\u043d\u0442\u0430\u043a\u0441)"})):i.a.createElement(i.a.Fragment,null),e.board.displayFlags&&!e.board.displayTags?i.a.createElement("div",null,i.a.createElement(_e.a,{margin:"dense",label:"\u041c\u0456\u0442\u043a\u0438",fullWidth:!0,value:T,onChange:q,helperText:"\u0420\u043e\u0437\u0434\u0456\u043b\u044f\u0442\u0438 \u043a\u043e\u043c\u0430\u043c\u0438 (CSV \u0441\u0438\u043d\u0442\u0430\u043a\u0441)"})):i.a.createElement(i.a.Fragment,null),e.board.displayBarcode?i.a.createElement("div",null,i.a.createElement(_e.a,{margin:"dense",label:"QR-\u043a\u043e\u0434",multiline:!0,rows:1,rowsMax:16,fullWidth:!0,value:v,onChange:function(e){y(e.target.value)}})):i.a.createElement(i.a.Fragment,null),e.board.displayMemo?i.a.createElement("div",null,i.a.createElement(_e.a,{margin:"dense",label:"\u041d\u043e\u0442\u0430\u0442\u043a\u0438",multiline:!0,rows:1,rowsMax:16,fullWidth:!0,value:S,onChange:function(e){w(e.target.value)}})):i.a.createElement(i.a.Fragment,null))),i.a.createElement(Le.a,null,i.a.createElement(Ie.a,{onClick:X,variant:"outlined",color:"default"},i.a.createElement(Ke.a,null),i.a.createElement("span",{style:{marginLeft:t.spacing(1)}}),"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438"),i.a.createElement(Ie.a,{onClick:function(){c(!1);var a=x.trim(),t=a?Fa(a):[],r=T.trim(),n=r?Fa(r):[];e.onApply(Object.assign({},e.record,{description:f,barcode:v,memo:S,tags:(t[0]||[]).map((function(e){return e.trim()})).filter((function(e){return e.length>0})),flags:(n[0]||[]).map((function(e){return e.trim()})).filter((function(e){return e.length>0})),dueDate:F&&!Number.isNaN(F.getTime())?ea(F):"",taskStatus:V,teamOrStory:K}))},variant:"contained",color:"primary"},i.a.createElement(We.a,null),i.a.createElement("span",{style:{marginLeft:t.spacing(1)}}),"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"))),d?i.a.createElement(fa,{open:!0,title:e.board.preferArchive?"\u0410\u0440\u0445\u0456\u0432\u0443\u0432\u0430\u0442\u0438":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",message:"\u0412\u0438 \u0432\u043f\u0435\u0432\u043d\u0435\u043d\u0456, \u0449\u043e \u0445\u043e\u0447\u0435\u0442\u0435 ".concat(e.board.preferArchive?"\u0430\u0440\u0445\u0456\u0432\u0443\u0432\u0430\u0442\u0438":"\u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438"," \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f?"),colorIsSecondary:!e.board.preferArchive,applyButtonCaption:e.board.preferArchive?"\u0410\u0440\u0445\u0456\u0432\u0443\u0432\u0430\u0442\u0438":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",fab:e.board.preferArchive?i.a.createElement(la.a,{size:"large",variant:"round","aria-label":"archive",style:{margin:"auto"}},i.a.createElement(ua.a,null)):i.a.createElement(la.a,{size:"large",variant:"round","aria-label":"delete",color:"secondary",style:{margin:"auto"}},i.a.createElement(pa.a,null)),onClose:e.board.preferArchive?function(a){u(!1),a&&(c(!1),e.onArchive(e.record._id))}:function(a){u(!1),a&&(c(!1),e.onDelete(e.record._id))}}):i.a.createElement(i.a.Fragment,null))},Ua=t(60),Va=t(46),Pa=t(128),Wa=t(34),Ya=t(73),Ka=t(26),Ha={boards:[{type:"kanbanBoard",name:"\u0412\u0456\u0442\u0430\u043b\u044c\u043d\u0430 \u0434\u043e\u0448\u043a\u0430",taskStatuses:[{value:"Backlog",caption:"Backlog",className:"status-backlog"},{value:"ToDo",caption:"To do",className:"status-todo"},{value:"InProgress",caption:"In Progress",className:"status-inprogress"},{value:"Review",caption:"Review",className:"status-review"},{value:"Done",caption:"Done",className:"status-done",completed:!0}],teamOrStories:[{value:"Team A",caption:"\u041a\u043e\u043c\u0430\u043d\u0434\u0430 A",className:"team-or-story-team-a"},{value:"Team B",caption:"\u041a\u043e\u043c\u0430\u043d\u0434\u0430 \u0411",className:"team-or-story-team-b"},{value:"Team C",caption:"\u041a\u043e\u043c\u0430\u043d\u0434\u0430 \u0412",className:"team-or-story-team-c"}],tags:[{value:"bug",className:"tag-bug"}],displayBarcode:!0,displayMemo:!0,displayFlags:!0,displayTags:!0,preferArchive:!1,boardStyle:"/* per-board customized styles */\n/*\n.KanbanBoardView-sticky-note {width: 200px}\n.KanbanBoardView-header-cell-task-statuses {min-width: 210px}\ntable.KanbanBoardView-board tbody th {\n    padding: 10px;\n    white-space: nowrap;\n}\n*/\ntable.KanbanBoardView-board thead th.status-backlog {\n    background-color: var(--weak-header-bg-color);\n}\ntable.KanbanBoardView-board td.status-backlog {\n    background-color: var(--weak-data-bg-color);\n}\ntable.KanbanBoardView-board thead th.status-done {\n    background-color: var(--weak-header-bg-color);\n}\ntable.KanbanBoardView-board td.status-done {\n    background-color: var(--weak-data-bg-color);\n}\n.team-or-story-team-b .KanbanBoardView-sticky-note {\n    background-color: var(--sticky-blue-color);\n}\n.status-done .KanbanBoardView-sticky-note {\n    background-color: var(--sticky-green-color);\n}\n.KanbanBoardView-sticky-tags .tag-bug {\n    color: white;\n    background-color: red;\n}\n",calendarStyle:"/* per-board customized styles */\ndiv.CalendarView-item-chip.status-done {\n    background-color: var(--sticky-green-color);\n}\n"}],records:[{type:"kanban",dueDate:"",description:"# \u041b\u0430\u0441\u043a\u0430\u0432\u043e \u043f\u0440\u043e\u0448\u0443 \u0434\u043e \u0434\u043e\u0434\u0430\u0442\u043a\u0443!\n* \u0426\u0435 \u043a\u0430\u0440\u0442\u043a\u0430 \u0437 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f\u043c.\n* \u041f\u0438\u0448\u0456\u0442\u044c \u043e\u0434\u043d\u0435 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u0434\u043b\u044f \u043e\u0434\u043d\u0456\u0454\u0457 \u043a\u0430\u0440\u0442\u043a\u0438.\n* \u0429\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438 \u043a\u0430\u0440\u0442\u043a\u0443 \u043d\u0430 \u0434\u043e\u0448\u043a\u0443, \u043d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c \u043d\u0430 \u0456\u043a\u043e\u043d\u043a\u0443  \u0443 \u0432\u0435\u0440\u0445\u043d\u044c\u043e\u043c\u0443 \u043b\u0456\u0432\u043e\u043c\u0443 \u043a\u0443\u0442\u043a\u0443 \u0434\u043e\u0448\u043a\u0438.\n* \u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c \u0430\u0431\u043e \u043a\u043b\u0430\u0446\u043d\u0456\u0442\u044c \u043f\u043e \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044e \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f.\n* \u041f\u0435\u0440\u0435\u0442\u044f\u0433\u043d\u0456\u0442\u044c \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f, \u0449\u043e\u0431 \u0437\u043c\u0456\u043d\u0438\u0442\u0438 \u0439\u043e\u0433\u043e \u0441\u0442\u0430\u0442\u0443\u0441.",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"Backlog"},{type:"kanban",dueDate:"",description:"* \u0414\u043e\u0448\u043a\u0430 \u0442\u0430 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u0437\u0431\u0435\u0440\u0456\u0433\u0430\u044e\u0442\u044c\u0441\u044f \u0443 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0456\u0439 \u0456\u043d\u0434\u0435\u043a\u0441\u043e\u0432\u0430\u043d\u0456\u0439 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043d\u0456\u0439 \u0431\u0430\u0437\u0456 \u0434\u0430\u043d\u0438\u0445.\n* \u0412\u0438 \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0432\u0430\u0442\u0438 \u0432\u0456\u0434\u0434\u0430\u043b\u0435\u043d\u0438\u0439 \u0441\u0435\u0440\u0432\u0435\u0440 [`CouchDB`](https://couchdb.apache.org) \u0434\u043b\u044f \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0456\u0437\u0430\u0446\u0456\u0457 \u0434\u043e\u0448\u043e\u043a \u0434\u0435\u043a\u0456\u043b\u044c\u043a\u043e\u0445 \u043f\u0440\u0438\u0441\u0442\u0440\u043e\u0457\u0432\n* \u0410\u0431\u043e \u044f\u043a \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u0443 \u0431\u0435\u0437\u043a\u043e\u0448\u0442\u043e\u0432\u043d\u0443 \u0432\u0435\u0440\u0441\u0456\u044e \u043a\u0435\u0440\u043e\u0432\u0430\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0432\u0456\u0434 IBM: [\u201cIBM Cloudant\xae\u201d from IBM Cloud](https://www.ibm.com/cloud/cloudant).\n",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"ToDo"},{type:"kanban",dueDate:"",description:"# \u0414\u043b\u044f \u0432\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f -> [\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f](#/config/)\n\n----\n\n* `remote.endpointUrl`: \u043f\u043e\u0441\u0438\u043b\u0430\u043d\u044f\u043d \u043d\u0430 Cloudant `External Endpoint` \u0440\u0430\u0437\u043e\u043c \u0437 \u043d\u0430\u0437\u0432\u043e\u044e \u0411\u0414\n  * \u043f\u0440\u0438\u043a\u043b\u0430\u0434: `https://???-bluemix.cloudant.com/mydb`\n* `remote.user`: Cloudant `API Key`\n* `remote.password`: \u043f\u0430\u0440\u043e\u043b\u044c Cloudant `API Key`",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"ToDo"},{type:"kanban",dueDate:"",description:"* \u0412\u0438 \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u0442\u0438 \u0432\u0438\u0433\u043b\u044f\u0434 \u0456 \u043f\u043e\u0432\u0435\u0434\u0456\u043d\u043a\u0443 \u0434\u043e\u0448\u043a\u0438 \u0442\u0430 \u0437\u0430\u0432\u0434\u0430\u043d\u044c \u0443 \u0432\u0456\u043a\u043d\u0456 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0430 \u043a\u043e\u043d\u0444\u0456\u0433\u0443\u0440\u0430\u0446\u0456\u0457.\n\n\n\n\n\n\n\n\n\n\n\n----\n\n# \u041f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u0432 [\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440](#/edit/) \u0434\u043b\u044f \u043d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"InProgress"},{type:"kanban",dueDate:"2030-01-01",description:"### \u041f\u0440\u0438\u0432\u0456\u0442, \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0443! !\n\n* ~aaa~\n  * **bbb**\n* *ccc*\n\n----\n\n",barcode:"12345",memo:"memo",flags:["Marked"],tags:["PR","bug"],boardId:"",teamOrStory:"Team B",taskStatus:"Staging"},{type:"kanban",dueDate:"",description:"",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team C",taskStatus:"Backlog"},{type:"kanban",dueDate:"",description:"",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team C",taskStatus:"Backlog"},{type:"kanban",dueDate:"",description:"# \u041f\u043e\u0447\u0430\u0442\u043e\u043a \u0440\u043e\u0431\u043e\u0442\u0438 \u0437 Cloudant \u0432 IBM Cloud\nhttps://developer.ibm.com/clouddataservices/docs/cloudant/get-started/",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team C",taskStatus:"ToDo"},{type:"kanban",dueDate:"",description:"# \u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0439\u0442\u0435\u0441\u044f \u0432 IBM Cloud\nhttps://cloud.ibm.com/registration",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team C",taskStatus:"ToDo"},{type:"kanban",dueDate:"",description:"",barcode:"",memo:"",flags:[],tags:[],boardId:"",teamOrStory:"Team A",taskStatus:"Done"},{type:"kanban",dueDate:"2030-01-01",description:"\u0426\u0435\u0439 \u0437\u0430\u043f\u0438\u0441 \u0430\u0440\u0445\u0456\u0432\u043e\u0432\u0430\u043d\u043e.",barcode:"",memo:"",flags:["Archived"],tags:[],boardId:"",teamOrStory:"Team B",taskStatus:"Backlog"}]},Ra=null;function za(){return $a.apply(this,arguments)}function $a(){return($a=Object(o.a)(n.a.mark((function e(){var a,t,r,c,i,s,l,d,u,m,p,f,g,b,h,v,y,E,S;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ra){e.next=59;break}return a=B(),t=null,e.next=5,a.allDocs({include_docs:!0});case 5:if(0!==(t=e.sent).rows.length){e.next=36;break}return r=Ha,e.next=10,a.bulkDocs(Object(Wa.a)(r.boards),{});case 10:for(c=e.sent,i=new Date,s=!0,l=!1,d=void 0,e.prev=15,u=r.records[Symbol.iterator]();!(s=(m=u.next()).done);s=!0)(p=m.value).dueDate=ea(i),p.boardId=c[0].id;e.next=23;break;case 19:e.prev=19,e.t0=e.catch(15),l=!0,d=e.t0;case 23:e.prev=23,e.prev=24,s||null==u.return||u.return();case 26:if(e.prev=26,!l){e.next=29;break}throw d;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return e.next=33,a.bulkDocs(Object(Wa.a)(r.records),{});case 33:return e.next=35,a.allDocs({include_docs:!0});case 35:t=e.sent;case 36:for(f=t.rows.filter((function(e){return e.doc&&"kanbanBoard"===e.doc.type})).map((function(e){return e.doc})).sort((function(e,a){return String(e.name).toLocaleLowerCase()>=String(a.name).toLocaleLowerCase()?String(e.name)===String(a.name)?0:1:-1})),g=!0,b=!1,h=void 0,e.prev=40,v=function(){var e=E.value,a=t.rows.filter((function(a){return a.doc&&"kanban"===a.doc.type&&a.doc.boardId===e._id})).map((function(e){return e.doc}));e.records=a},y=f[Symbol.iterator]();!(g=(E=y.next()).done);g=!0)v();e.next=49;break;case 45:e.prev=45,e.t1=e.catch(40),b=!0,h=e.t1;case 49:e.prev=49,e.prev=50,g||null==y.return||y.return();case 52:if(e.prev=52,!b){e.next=55;break}throw h;case 55:return e.finish(52);case 56:return e.finish(49);case 57:S={activeBoard:f[0],boards:f,activeBoardId:f[0]._id,activeBoardIndex:0},Ra=Object(Ya.reducerWithInitialState)(S).case(je.startAddBoard,(function(e,t){var r=Ha,n={type:"kanbanBoard",name:t.boardName,taskStatuses:r.boards[0].taskStatuses,teamOrStories:r.boards[0].teamOrStories,tags:r.boards[0].tags,displayBarcode:r.boards[0].displayBarcode,displayMemo:r.boards[0].displayMemo,displayFlags:r.boards[0].displayFlags,displayTags:r.boards[0].displayTags,preferArchive:r.boards[0].preferArchive,boardStyle:r.boards[0].boardStyle,calendarStyle:r.boards[0].calendarStyle};return a.post(n,{}).then((function(a){var r=n;r._id=a.id,r._rev=a.rev,r.records=[],e.boards=e.boards.concat([r]),ct().dispatch(je.doneAddBoard({params:t,result:Object.assign({},e,{activeBoardId:a.id,activeBoard:r})})),setTimeout((function(){ct().dispatch(Object(Ka.d)("/kanban/".concat(a.id)))}),30)})).catch((function(e){ct().dispatch(je.failedAddBoard({params:t,error:e})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"\u041d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e \u0434\u043e\u0434\u0430\u0442\u0438 \u0434\u043e\u0448\u043a\u0443: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(je.doneAddBoard,(function(e,a){return setTimeout((function(){k().then((function(){})).catch((function(e){alert(e.message)}))}),1500),a.result})).case(je.failedAddBoard,(function(e,a){return e})).case(je.startChangeActiveBoard,(function(e,t){return Object(o.a)(n.a.mark((function r(){var o,c,i,s;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.get(t.boardId,{});case 3:if(o=r.sent){r.next=6;break}return r.abrupt("return",e);case 6:return r.next=8,a.find({selector:{type:"kanban",boardId:o._id}});case 8:c=r.sent.docs,o.records=c,i=e.boards.findIndex((function(e){return e._id===o._id})),s=e.boards.slice(0,i).concat([o],e.boards.slice(i+1)),ct().dispatch(je.doneChangeActiveBoard({params:t,result:Object.assign({},e,{boards:s,activeBoardId:o._id,activeBoard:o})})),r.next=19;break;case 15:r.prev=15,r.t0=r.catch(0),ct().dispatch(je.failedChangeActiveBoard({params:t,error:r.t0})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u043c\u0456\u043d\u0438 \u0434\u043e\u0448\u043a\u0438: "+r.t0.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){ct().dispatch(W.closeAlertDialog()),setTimeout((function(){ct().dispatch(Object(Ka.d)("/kanban/"))}),500)}}))}),30);case 19:case"end":return r.stop()}}),r,null,[[0,15]])})))(),e})).case(je.doneChangeActiveBoard,(function(e,a){return a.result})).case(je.failedChangeActiveBoard,(function(e,a){return e})).case(je.startUpdateBoardName,(function(e,t){return Object(o.a)(n.a.mark((function r(){var o,c,i,s,l,d,u;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.get(t.boardId);case 3:if(o=r.sent){r.next=6;break}return r.abrupt("return",e);case 6:return r.next=8,a.find({selector:{type:"kanban",boardId:o._id}});case 8:return c=r.sent.docs,i=Object.assign({},o,{name:t.boardName}),r.next=12,a.put(i,{});case 12:s=r.sent,i.records=c,i._id=s.id,i._rev=s.rev,l=e.boards.findIndex((function(e){return e._id===t.boardId})),d=Object.assign({},e.boards[l]||{},i),u=l>=0?e.boards.slice(0,l).concat([d],e.boards.slice(l+1)):e.boards,ct().dispatch(je.doneUpdateBoardName({params:t,result:Object.assign({},e,{boards:u,activeBoardId:d._id,activeBoard:d})})),r.next=26;break;case 22:r.prev=22,r.t0=r.catch(0),ct().dispatch(je.failedUpdateBoardName({params:t,error:r.t0})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438\u0437\u043c\u0456\u043d\u043d\u0456 \u043d\u0430\u0437\u0432\u0438 \u0434\u043e\u0448\u043a\u0438: "+r.t0.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30);case 26:case"end":return r.stop()}}),r,null,[[0,22]])})))(),e})).case(je.doneUpdateBoardName,(function(e,a){return a.result})).case(je.failedUpdateBoardName,(function(e,a){return e})).case(je.startDeleteBoard,(function(e,t){return Object(o.a)(n.a.mark((function r(){var o,c,i,s,l,d,u,m,p,f,g,b;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!(e.boards.length<=1)){r.next=3;break}return r.abrupt("return",e);case 3:return r.next=5,a.get(t.boardId);case 5:if(o=r.sent){r.next=8;break}return r.abrupt("return",e);case 8:return r.next=10,a.find({selector:{type:"kanban",boardId:t.boardId}});case 10:c=r.sent.docs,i=!0,s=!1,l=void 0,r.prev=14,d=c[Symbol.iterator]();case 16:if(i=(u=d.next()).done){r.next=23;break}return m=u.value,r.next=20,a.remove(m,{});case 20:i=!0,r.next=16;break;case 23:r.next=29;break;case 25:r.prev=25,r.t0=r.catch(14),s=!0,l=r.t0;case 29:r.prev=29,r.prev=30,i||null==d.return||d.return();case 32:if(r.prev=32,!s){r.next=35;break}throw l;case 35:return r.finish(32);case 36:return r.finish(29);case 37:return r.next=39,a.remove(o,{});case 39:p=e.boards.findIndex((function(e){return e._id===t.boardId})),f=p>=0?e.boards.slice(0,p).concat(e.boards.slice(p+1)):e.boards,g=e.activeBoard,(b=e.activeBoardId)===t.boardId&&(g=f[0],b=f[0]._id),setTimeout((function(){ct().dispatch(je.doneDeleteBoard({params:t,result:Object.assign({},e,{boards:f,activeBoardId:b,activeBoard:g})})),setTimeout((function(){ct().dispatch(Object(Ka.d)("/kanban/".concat(b))),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Done",message:"\u0423\u0441\u043f\u0456\u0448\u043d\u043e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e",singleButton:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30)}),30)}),30),r.next=51;break;case 47:r.prev=47,r.t1=r.catch(0),ct().dispatch(je.failedDeleteBoard({params:t,error:r.t1})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u0456 \u0434\u043e\u0448\u043a\u0438: "+r.t1.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30);case 51:case"end":return r.stop()}}),r,null,[[0,47],[14,25,29,37],[30,,32,36]])})))(),e})).case(je.doneDeleteBoard,(function(e,a){return a.result})).case(je.failedDeleteBoard,(function(e,a){return e})).case(je.startAddStikey,(function(e,t){var r=new Date,n={type:"kanban",dueDate:ea(new Date(r.getFullYear(),r.getMonth(),r.getDate())),description:"# \u0411\u0435\u0437 \u043d\u0430\u0437\u0432\u0438",barcode:"",memo:"",flags:[],tags:[],boardId:e.activeBoardId,taskStatus:e.activeBoard.taskStatuses[0].value,teamOrStory:e.activeBoard.teamOrStories[0].value},o=e.activeBoard.records.concat([n]),c=Object.assign({},e.activeBoard,{records:o});return a.post(n,{}).then((function(a){n._id=a.id,n._rev=a.rev,ct().dispatch(je.doneAddStikey({params:t,result:Object.assign({},e,{activeBoard:c})}))})).catch((function(e){ct().dispatch(je.failedAddStikey({params:t,error:e})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"\u041d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e \u0434\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(je.doneAddStikey,(function(e,a){return setTimeout((function(){k().then((function(){})).catch((function(e){alert(e.message)}))}),1500),a.result})).case(je.failedAddStikey,(function(e,a){return e})).case(je.startUpdateStikey,(function(e,t){var r=e.activeBoard.records.findIndex((function(e){return e._id===t._id}));if(r<0)return e;var n=Object.assign({},e.activeBoard.records[r],{dueDate:t.dueDate,description:t.description,barcode:t.barcode,memo:t.memo,tags:t.tags,flags:t.flags,taskStatus:t.taskStatus,teamOrStory:t.teamOrStory}),o=e.activeBoard.records.slice(0,r).concat([n],e.activeBoard.records.slice(r+1)),c=Object.assign({},e.activeBoard,{records:o});return a.put(n,{}).then((function(a){n._id=a.id,n._rev=a.rev,ct().dispatch(je.doneUpdateStikey({params:t,result:Object.assign({},e,{activeBoard:c})}))})).catch((function(e){ct().dispatch(je.failedUpdateStikey({params:t,error:e})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456 : "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(je.doneUpdateStikey,(function(e,a){return a.result})).case(je.failedUpdateStikey,(function(e,a){return e})).case(je.startUpdateStikeyLanes,(function(e,t){var r=e.activeBoard.records.findIndex((function(e){return e._id===t.kanbanId}));if(r<0)return e;var n=Object.assign({},e.activeBoard.records[r],{taskStatus:t.taskStatusValue,teamOrStory:t.teamOrStoryValue}),o=e.activeBoard.records.slice(0,r).concat([n],e.activeBoard.records.slice(r+1)),c=Object.assign({},e.activeBoard,{records:o});return a.put(n,{}).then((function(a){n._id=a.id,n._rev=a.rev,ct().dispatch(je.doneUpdateStikeyLanes({params:t,result:Object.assign({},e,{activeBoard:c})}))})).catch((function(e){ct().dispatch(je.failedUpdateStikeyLanes({params:t,error:e})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(je.doneUpdateStikeyLanes,(function(e,a){return a.result})).case(je.failedUpdateStikeyLanes,(function(e,a){return e})).case(je.startArchiveStikey,(function(e,t){var r=e.activeBoard.records.findIndex((function(e){return e._id===t.kanbanId}));if(r<0)return e;var n=Object.assign({},e.activeBoard.records[r]);n.flags=(n.flags||[]).filter((function(e){return"Archived"!==e})),n.flags.push("Archived");var o=e.activeBoard.records.slice(0,r).concat([n],e.activeBoard.records.slice(r+1)),c=Object.assign({},e.activeBoard,{records:o});return a.put(n,{}).then((function(a){n._id=a.id,n._rev=a.rev,ct().dispatch(je.doneArchiveStikey({params:t,result:Object.assign({},e,{activeBoard:c})}))})).catch((function(e){ct().dispatch(je.failedArchiveStikey({params:t,error:e})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0430\u0440\u0445\u0456\u0432\u0443\u0432\u0430\u043d\u043d\u0456: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(je.doneArchiveStikey,(function(e,a){return a.result})).case(je.failedArchiveStikey,(function(e,a){return e})).case(je.startDeleteStikey,(function(e,t){var r=e.activeBoard.records.findIndex((function(e){return e._id===t.kanbanId}));if(r<0)return e;var n=e.activeBoard.records[r],o=e.activeBoard.records.slice(0,r).concat(e.activeBoard.records.slice(r+1)),c=Object.assign({},e.activeBoard,{records:o});return a.remove(n,{}).then((function(a){ct().dispatch(je.doneDeleteStikey({params:t,result:Object.assign({},e,{activeBoard:c})}))})).catch((function(e){ct().dispatch(je.failedDeleteStikey({params:t,error:e})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u0456: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(je.doneDeleteStikey,(function(e,a){return a.result})).case(je.failedDeleteStikey,(function(e,a){return e})).case(je.startEditBoardAndStikeys,(function(e,t){return Object(o.a)(n.a.mark((function r(){var o,c,i,s,l,d,u,m,p,f,g,b,h,v,y,E,k,w,O;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!((o=e.boards.findIndex((function(e){return e._id===t._id})))<0)){r.next=4;break}return r.abrupt("return",e);case 4:return c=Object.assign({},e.boards[o],{name:t.name||"Untitled",taskStatuses:t.taskStatuses||S.activeBoard.taskStatuses,teamOrStories:t.teamOrStories||S.activeBoard.teamOrStories,tags:t.tags||S.activeBoard.tags,displayBarcode:!!t.displayBarcode,displayMemo:!!t.displayMemo,displayFlags:!!t.displayFlags,displayTags:!!t.displayTags,preferArchive:!!t.preferArchive,boardStyle:t.boardStyle||S.activeBoard.boardStyle,calendarStyle:t.calendarStyle||S.activeBoard.calendarStyle}),r.next=7,a.put(c,{});case 7:return i=r.sent,c._id=i.id,c._rev=i.rev,s=e.boards.slice(0,o).concat([c],e.boards.slice(o+1)),l=c._id===e.activeBoard._id?c:e.activeBoard,r.next=14,a.find({selector:{type:"kanban",boardId:c._id}});case 14:d=r.sent.docs,u=[],m=!0,p=!1,f=void 0,r.prev=19,g=n.a.mark((function e(){var t,r,o,i,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,r=d.find((function(e){return e._id===t._id})),o=null,!r){e.next=12;break}return o=Object.assign({},t,{type:"kanban",boardId:c._id,_rev:r._rev}),e.next=7,a.put(o,{});case 7:i=e.sent,o._id=i.id,o._rev=i.rev,e.next=20;break;case 12:return delete(o=Object.assign({},t,{type:"kanban",boardId:c._id}))._id,delete o._rev,e.next=17,a.post(o,{});case 17:s=e.sent,o._id=s.id,o._rev=s.rev;case 20:u.push(o);case 21:case"end":return e.stop()}}),e)})),b=(t.records||[])[Symbol.iterator]();case 22:if(m=(h=b.next()).done){r.next=27;break}return r.delegateYield(g(),"t0",24);case 24:m=!0,r.next=22;break;case 27:r.next=33;break;case 29:r.prev=29,r.t1=r.catch(19),p=!0,f=r.t1;case 33:r.prev=33,r.prev=34,m||null==b.return||b.return();case 36:if(r.prev=36,!p){r.next=39;break}throw f;case 39:return r.finish(36);case 40:return r.finish(33);case 41:v=!0,y=!1,E=void 0,r.prev=44,k=n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O.value,u.find((function(e){return e._id===t._id}))){e.next=5;break}return e.next=5,a.remove(t,{});case 5:case"end":return e.stop()}}),e)})),w=d[Symbol.iterator]();case 47:if(v=(O=w.next()).done){r.next=52;break}return r.delegateYield(k(),"t2",49);case 49:v=!0,r.next=47;break;case 52:r.next=58;break;case 54:r.prev=54,r.t3=r.catch(44),y=!0,E=r.t3;case 58:r.prev=58,r.prev=59,v||null==w.return||w.return();case 61:if(r.prev=61,!y){r.next=64;break}throw E;case 64:return r.finish(61);case 65:return r.finish(58);case 66:c.records=u,ct().dispatch(je.doneEditBoardAndStikeys({params:t,result:Object.assign({},e,{boards:s,activeBoardId:l._id,activeBoard:l})})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Done",message:"\u0423\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e",singleButton:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30),r.next=75;break;case 71:r.prev=71,r.t4=r.catch(0),ct().dispatch(je.failedEditBoardAndStikeys({params:t,error:r.t4})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456: "+r.t4.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30);case 75:case"end":return r.stop()}}),r,null,[[0,71],[19,29,33,41],[34,,36,40],[44,54,58,66],[59,,61,65]])})))(),e})).case(je.doneEditBoardAndStikeys,(function(e,a){return setTimeout((function(){k().then((function(){})).catch((function(e){alert(e.message)}))}),1500),a.result})).case(je.failedEditBoardAndStikeys,(function(e,a){return e}));case 59:return e.abrupt("return",Ra);case 60:case"end":return e.stop()}}),e,null,[[15,19,23,31],[24,,26,30],[40,45,49,57],[50,,52,56]])})))).apply(this,arguments)}var Ga=M()(),Xa={showToday:Ga("ACTIONS_SHOW_TODAY"),showNextMonth:Ga("ACTIONS_SHOW_NEXT_MONTH"),showPreviousMonth:Ga("ACTIONS_SHOW_PREVIOUS_MONTH"),showNextYear:Ga("ACTIONS_SHOW_NEXT_YEAR"),showPreviousYear:Ga("ACTIONS_SHOW_PREVIOUS_YEAR")},Ja=null;function qa(){return Qa.apply(this,arguments)}function Qa(){return(Qa=Object(o.a)(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ja||(a={activeMonth:new Date},Ja=Object(Ya.reducerWithInitialState)(a).case(Xa.showToday,(function(e){var a=new Date,t=new Date(a.getFullYear(),a.getMonth(),1);return Object.assign({},e,{activeMonth:t})})).case(Xa.showNextMonth,(function(e){var a=e.activeMonth,t=new Date(a.getFullYear(),a.getMonth()+1,1);return Object.assign({},e,{activeMonth:t})})).case(Xa.showPreviousMonth,(function(e){var a=e.activeMonth,t=new Date(a.getFullYear(),a.getMonth()-1,1);return Object.assign({},e,{activeMonth:t})})).case(Xa.showNextYear,(function(e){var a=e.activeMonth,t=new Date(a.getFullYear()+1,a.getMonth(),1);return Object.assign({},e,{activeMonth:t})})).case(Xa.showPreviousYear,(function(e){var a=e.activeMonth,t=new Date(a.getFullYear()-1,a.getMonth(),1);return Object.assign({},e,{activeMonth:t})}))),e.abrupt("return",Ja);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Za(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function et(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Za(t,!0).forEach((function(a){Object(R.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Za(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var at=null;function tt(){return rt.apply(this,arguments)}function rt(){return(rt=Object(o.a)(n.a.mark((function e(){var a,t,r,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(at){e.next=16;break}return a=v,t=B(),r=null,e.next=6,a.allDocs({include_docs:!0});case 6:if(0!==(r=e.sent).rows.length){e.next=13;break}return e.next=10,a.post({type:"appConfig",remoteDbUrl:"",remoteDbUser:"",remoteDbPassword:""},{});case 10:return e.next=12,a.allDocs({include_docs:!0});case 12:r=e.sent;case 13:(c={alertDialog:{open:!1,title:"",message:"",onClose:function(){}},appConfig:et({},r.rows[0].doc)}).appConfig.remote&&c.appConfig.remote.endpointUrl?w(c.appConfig.remote.endpointUrl,c.appConfig.remote.user||"",c.appConfig.remote.password||"").then((function(){})).catch((function(e){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044f \u0434\u043e \u0432\u0456\u0434\u0434\u0430\u043b\u0435\u043d\u043e\u0457 \u0431\u0430\u0437\u0438 \u0434\u0430\u043d\u0438\u0445: "+e.message)})):w("","","").then((function(){})).catch((function(e){alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044f \u0434\u043e \u0432\u0456\u0434\u0434\u0430\u043b\u0435\u043d\u043e\u0457 \u0431\u0430\u0437\u0438 \u0434\u0430\u043d\u0438\u0445: "+e.message)})),at=Object(Ya.reducerWithInitialState)(c).case(W.showAlertDialog,(function(e,a){return Object.assign({},e,{alertDialog:a})})).case(W.closeAlertDialog,(function(e){return Object.assign({},e,{alertDialog:c})})).case(W.startUpdateAppConfig,(function(e,t){var r=Object.assign({},e.appConfig,t.remote&&t.remote.endpointUrl?t:{remote:{endpointUrl:"",user:"",password:""}});return a.put(r,{}).then((function(a){r._id=a.id,r._rev=a.rev,ct().dispatch(W.doneUpdateAppConfig({params:t,result:Object.assign({},e,{appConfig:r})})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Done",message:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e \u0443\u0441\u043f\u0456\u0448\u043d\u043e.",singleButton:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30),r.remote.endpointUrl&&w(r.remote.endpointUrl,r.remote.user,r.remote.password).then((function(){})).catch((function(e){ct().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044f \u0434\u043e \u0432\u0456\u0434\u0434\u0430\u043b\u0435\u043d\u043e\u0457 \u0431\u0430\u0437\u0438 \u0434\u0430\u043d\u0438\u0445: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}))})).catch((function(e){ct().dispatch(W.failedUpdateAppConfig({params:t,error:e})),setTimeout((function(){ct().dispatch(W.showAlertDialog({open:!0,title:"Error",message:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u044c: "+e.message,singleButton:!0,colorIsSecondary:!0,onClose:function(){return ct().dispatch(W.closeAlertDialog())}}))}),30)})),e})).case(W.doneUpdateAppConfig,(function(e,a){return a.result})).case(W.failedUpdateAppConfig,(function(e,a){return e})).case(W.startResetApplication,(function(e){return Object(o.a)(n.a.mark((function r(){return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.prev=1,r.next=4,w("","","");case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),alert(r.t0);case 9:return r.prev=9,r.next=12,t.destroy({});case 12:r.next=17;break;case 14:r.prev=14,r.t1=r.catch(9),alert(r.t1);case 17:return r.prev=17,r.next=20,a.destroy({});case 20:r.next=25;break;case 22:r.prev=22,r.t2=r.catch(17),alert(r.t2);case 25:alert("\u0423\u0441\u0456 \u0434\u0430\u043d\u0456 \u0437\u043d\u0438\u0449\u0435\u043d\u043e, \u043f\u0435\u0440\u0435\u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0442\u0435 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443."),ct().dispatch(W.doneResetApplication({result:e})),r.next=33;break;case 29:r.prev=29,r.t3=r.catch(0),alert(r.t3),ct().dispatch(W.failedResetApplication({error:r.t3}));case 33:case"end":return r.stop()}}),r,null,[[0,29],[1,6],[9,14],[17,22]])})))(),e})).case(W.doneUpdateAppConfig,(function(e,a){return a.result})).case(W.failedUpdateAppConfig,(function(e,a){return e}));case 16:return e.abrupt("return",at);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nt=Object(Va.a)({hashType:"slash"}),ot=null;function ct(){return ot}function it(){return st.apply(this,arguments)}function st(){return(st=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ot){e.next=17;break}return e.t0=Ua.e,e.t1=Ua.c,e.t2=Object(u.b)(nt),e.next=6,tt();case 6:return e.t3=e.sent,e.next=9,za();case 9:return e.t4=e.sent,e.next=12,qa();case 12:e.t5=e.sent,e.t6={router:e.t2,appEvents:e.t3,kanbanBoard:e.t4,calendar:e.t5},e.t7=(0,e.t1)(e.t6),e.t8=Object(Ua.d)(Object(Ua.a)(Object(Pa.a)(nt))),ot=(0,e.t0)(e.t7,e.t8);case 17:return e.abrupt("return",ot);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t(188);var lt=Object(D.a)((function(e){return{root:{},smallIcon:{width:"20px",height:"20px"}}})),dt=function(){return{}},ut=-1!==window.navigator.userAgent.toLowerCase().indexOf("firefox"),mt=Object(d.c)(dt,Te)((function(e){var a=i.a.useState(!1),t=Object(H.a)(a,2),r=t[0],n=t[1],o=new Date,c=new Date(o.getFullYear(),o.getMonth(),o.getDate()),s=e.record.dueDate?aa(e.record.dueDate):null,l=!e.taskStatus.completed&&!!s&&s<c;return i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{id:ze(),"data-record-id":e.record._id||"",className:"KanbanBoardView-sticky-link",draggable:!0,onClick:function(e){return n(!0)},onDragStart:function(e){e.dataTransfer.setData("elId",e.target.id)}},i.a.createElement("div",{className:"KanbanBoardView-sticky-note"+(l?" expired":"")},e.board.displayTags&&e.record.tags.length?i.a.createElement("ul",{className:"KanbanBoardView-sticky-tags"},e.record.tags.map((function(a,t){var r=(e.board.tags||[]).find((function(e){return e.value===a}));return i.a.createElement("li",{key:e.record._id+"-tag-"+t,className:r?r.className:""},a)}))):i.a.createElement(i.a.Fragment,null),i.a.createElement("div",{className:"KanbanBoardView-sticky-description",dangerouslySetInnerHTML:{__html:Qe()(e.record.description)}}),e.board.displayBarcode&&e.record.barcode?i.a.createElement("div",{className:"KanbanBoardView-sticky-barcode",dangerouslySetInnerHTML:{__html:new Ze.a({fill:!0,fillColor:_?"#fff":"#000",cellSize:2,unit:"px",data:e.record.barcode}).toImgTag()}}):i.a.createElement(i.a.Fragment,null),e.record.flags.includes("Marked")?i.a.createElement("div",{className:"marked"},"\ud83d\udccd"):i.a.createElement(i.a.Fragment,null),e.record.dueDate?i.a.createElement("div",{className:"due-date"},(l?"\ud83d\udd25":"\u23f3")+e.record.dueDate):i.a.createElement(i.a.Fragment,null))),r?i.a.createElement(Ma,{open:!0,record:e.record,teamOrStories:e.teamOrStories,taskStatuses:e.taskStatuses,board:e.board,onApply:function(a){e.updateStikey(a),n(!1)},onArchive:function(a){e.archiveStikey(a),n(!1)},onDelete:function(a){e.deleteStikey(a),n(!1)},onCancel:function(){n(!1)}}):i.a.createElement(i.a.Fragment,null))})),pt=Object(d.c)(dt,Te)((function(e){return i.a.createElement("div",{className:"KanbanBoardView-sticky-wrap "+(e.teamOrStory.className||"")+" "+(e.taskStatus.className||""),"data-status":e.taskStatus.value,"data-team-or-story":e.teamOrStory.value,onDragOver:function(e){e.preventDefault()},onDrop:function(a){try{var t=a.dataTransfer.getData("elId"),r=document.getElementById(t);e.updateStikeyLanes({kanbanId:r.dataset.recordId,taskStatusValue:e.taskStatus.value,teamOrStoryValue:e.teamOrStory.value})}catch(n){alert(n.message)}a.preventDefault()}},e.records.filter((function(e){return!e.flags||!e.flags.includes("Archived")})).map((function(a){return i.a.createElement(mt,{key:a._id||ze(),teamOrStory:e.teamOrStory,taskStatus:e.taskStatus,teamOrStories:e.teamOrStories,taskStatuses:e.taskStatuses,board:e.board,record:a})})),ut?i.a.createElement(i.a.Fragment,null,"\xa0"):i.a.createElement(i.a.Fragment,null))})),ft=Object(d.c)(Ne,Te)((function(e){var a=lt(),t=Object(He.a)(),r=i.a.useState({open:!1,title:"",message:"",fieldLabel:"",value:"",validator:function(e){return e.trim().length<=0},onClose:function(a,t){if(c(Object.assign({},o,{open:!1})),a&&t){var r=ct().getState();e.updateBoardName({boardId:r.kanbanBoard.activeBoardId,boardName:t})}}}),n=Object(H.a)(r,2),o=n[0],c=n[1];if(e.match.params.id&&e.activeBoard._id!==e.match.params.id){var s=e.boards.findIndex((function(a){return a._id===e.match.params.id}));return e.changeActiveBoard(e.match.params.id),i.a.createElement("div",{className:"KanbanBoardView-content"},s<0?i.a.createElement(i.a.Fragment,null,i.a.createElement(Je.a,{style:{marginTop:t.spacing(10)},variant:"h4",align:"center"},"\u041d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e."),i.a.createElement(Je.a,{style:{marginTop:t.spacing(5),cursor:"pointer",textDecoration:"underline"},variant:"body1",align:"center",onClick:function(a){e.history.push("/")}},"\u041d\u0430\u0436\u043c\u0456\u0442\u044c \u0441\u044e\u0434\u0438 \u0434\u043b\u044f \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0457 \u0434\u043e\u0448\u043a\u0438.")):i.a.createElement(i.a.Fragment,null))}return i.a.createElement("div",{className:"KanbanBoardView-content"},i.a.createElement("style",{dangerouslySetInnerHTML:{__html:e.activeBoard.boardStyle}}),i.a.createElement(Je.a,{variant:"h6",align:"center",style:{cursor:"pointer"},onClick:function(){var e=ct().getState();c(Object.assign({},o,{open:!0,title:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438 \u043d\u0430\u0437\u0432\u0443 \u0434\u043e\u0448\u043a\u0438",message:"",fieldLabel:"\u041d\u0430\u0437\u0432\u0430",value:e.kanbanBoard.activeBoard.name}))}},e.activeBoard.name),i.a.createElement("table",{className:"KanbanBoardView-board"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"KanbanBoardView-header-cell-add-stikey"},i.a.createElement(G.a,{style:{margin:0,padding:0},onClick:function(a){return e.addStikey()}},i.a.createElement(ee.a,{className:Object(j.a)(a.smallIcon)}))),e.activeBoard.taskStatuses.map((function(e){return i.a.createElement("th",{key:e.value,className:"KanbanBoardView-header-cell-task-statuses "+(e.className||"")},e.caption||e.value)})))),i.a.createElement("tbody",null,e.activeBoard.teamOrStories.map((function(a){return i.a.createElement("tr",{key:a.value},i.a.createElement("th",{className:"KanbanBoardView-header-cell-team-or-stories "+(a.className||"")},a.caption||a.value),e.activeBoard.taskStatuses.map((function(t){return i.a.createElement("td",{key:t.value,className:(a.className||"")+" "+(t.className||"")},i.a.createElement(pt,{teamOrStory:a,taskStatus:t,teamOrStories:e.activeBoard.teamOrStories,taskStatuses:e.activeBoard.taskStatuses,board:e.activeBoard,records:e.activeBoard.records.filter((function(e){return e.teamOrStory===a.value&&e.taskStatus===t.value}))}))})))})))),o.open?i.a.createElement($e,{open:!0,title:o.title,message:o.message,fieldLabel:o.fieldLabel,value:o.value,validator:o.validator,onClose:o.onClose}):i.a.createElement(i.a.Fragment,null))})),gt=t(146),bt=t.n(gt),ht=t(147),vt=t.n(ht);function yt(e){return{showToday:function(){return e(Xa.showToday())},showNextMonth:function(){return e(Xa.showNextMonth())},showPreviousMonth:function(){return e(Xa.showPreviousMonth())},showNextYear:function(){return e(Xa.showNextYear())},showPreviousYear:function(){return e(Xa.showPreviousYear())},showAlertDialog:function(a){return e(W.showAlertDialog(a))},closeAlertDialog:function(){return e(W.closeAlertDialog())},changeActiveBoard:function(a){return e(je.startChangeActiveBoard(Object.assign({},{boardId:a},{dispatch:e})))},updateBoardName:function(a){return e(je.startUpdateBoardName(a))},updateStikey:function(a){return e(je.startUpdateStikey(Object.assign({},a,{dispatch:e})))},archiveStikey:function(a){return e(je.startArchiveStikey({kanbanId:a}))},deleteStikey:function(a){return e(je.startDeleteStikey(Object.assign({},{kanbanId:a},{dispatch:e})))}}}function Et(e){return Object.assign({},{kanbanBoardState:e.kanbanBoard},e.calendar)}t(189);var kt=Object(D.a)((function(e){return{root:{flexGrow:1,color:"var(--main-text-color)",backgroundColor:"var(--main-bg-color)"},calendar:{width:"calc(100% - 30px)",height:"100%",margin:"15px",border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",tableLayout:"fixed"},calendarTitle:{position:"relative",height:"30px"},calendarTitleToolBar:{position:"absolute",top:0,left:0,margin:"3px 3px 6px 4px",overflow:"hidden",width:"calc(100% - 30px)",height:"39px"},calendarTopLeftHeader:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px"},calendarDaysHeader:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",width:"14%"},calendarSundayHeader:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",width:"14%",backgroundColor:"var(--weak-header-bg-color)",color:"var(--calendar-sunday-color)"},calendarSaturdayHeader:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",width:"14%",backgroundColor:"var(--weak-header-bg-color)",color:"var(--calendar-saturday-color)"},calendarCell:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",verticalAlign:"top"},calendarWeekendCell:{border:"solid 1px var(--main-text-color)",borderCollapse:"collapse",padding:"5px",verticalAlign:"top",backgroundColor:"var(--weak-data-bg-color)"},chip:{fontSize:"smaller",borderRadius:"5px",backgroundColor:"var(--sticky-blue-color)",color:"var(--main-text-color)",width:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",marginBottom:"2px",paddingLeft:"3px",paddingRight:"3px"},chipWrap:{"&:hover":{cursor:"pointer"}}}})),St=Object(d.c)(Et,yt)((function(e){var a=kt(),t=i.a.useState(!1),r=Object(H.a)(t,2),n=r[0],o=r[1],c=e.board.teamOrStories.find((function(a){return a.value===e.record.teamOrStory})),s=e.board.taskStatuses.find((function(a){return a.value===e.record.taskStatus})),l=new Date,d=new Date(l.getFullYear(),l.getMonth(),l.getDate()),u=e.record.dueDate?aa(e.record.dueDate):null,m=!(s&&s.completed)&&!!u&&u<d;return i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{className:Object(j.a)(a.chipWrap),onClick:function(e){return o(!0)}},i.a.createElement("div",{className:Object(j.a)(a.chip)+" CalendarView-item-chip"+(c?" "+c.className:"")+(s?" "+s.className:"")+(m?" \u043f\u0440\u043e\u0442\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u0430\u043d\u043e":"")},e.record.description.trim().replace(/\n/g," ").replace(/#+/g,"").trim())),n?i.a.createElement(Ma,{open:!0,record:e.record,teamOrStories:e.kanbanBoardState.activeBoard.teamOrStories,taskStatuses:e.kanbanBoardState.activeBoard.taskStatuses,board:e.board,onApply:function(a){e.updateStikey(a),o(!1)},onArchive:function(a){e.archiveStikey(a),o(!1)},onDelete:function(a){e.deleteStikey(a),o(!1)},onCancel:function(){o(!1)}}):i.a.createElement(i.a.Fragment,null))})),wt=Object(d.c)(Et,yt)((function(e){var a=kt(),t=Object(He.a)(),r=i.a.useState({open:!1,title:"",message:"",fieldLabel:"",value:"",validator:function(e){return e.trim().length<=0},onClose:function(a,t){if(c(Object.assign({},o,{open:!1})),a&&t){var r=ct().getState();e.updateBoardName({boardId:r.kanbanBoard.activeBoardId,boardName:t})}}}),n=Object(H.a)(r,2),o=n[0],c=n[1];if(e.match.params.id&&e.kanbanBoardState.activeBoard._id!==e.match.params.id){var s=e.kanbanBoardState.boards.findIndex((function(a){return a._id===e.match.params.id}));return e.changeActiveBoard(e.match.params.id),i.a.createElement("div",{className:a.root},s<0?i.a.createElement(i.a.Fragment,null,i.a.createElement(Je.a,{style:{marginTop:t.spacing(10)},variant:"h4",align:"center"},"\u041d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0434\u043e\u0448\u043a\u0438."),i.a.createElement(Je.a,{style:{marginTop:t.spacing(5),cursor:"pointer",textDecoration:"underline"},variant:"body1",align:"center",onClick:function(a){e.history.push("/")}},"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0441\u0442\u044c \u0441\u044e\u0434\u0438 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0443 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0443 \u0434\u043e\u0448\u043a\u0443.")):i.a.createElement(i.a.Fragment,null))}var l=e.activeMonth,d=new Date(l.getFullYear(),l.getMonth(),1),u=new Date(l.getFullYear(),l.getMonth()+1,0),m=new Date(d.getFullYear(),d.getMonth(),1-d.getDay()),p=new Date(u.getFullYear(),u.getMonth(),u.getDate()+(6-u.getDay())),f=new Date(p.getFullYear(),p.getMonth(),p.getDate()+1),g=[],b=[];g.push(b);for(var h=m;h.getTime()<=p.getTime();h=new Date(h.getFullYear(),h.getMonth(),h.getDate()+1))7<=b.length&&(b=[],g.push(b)),b.push(h);var v=e.kanbanBoardState.activeBoard.records.filter((function(e){if(e.flags&&e.flags.includes("Archived"))return!1;if(!e.dueDate)return!1;var a=new Date(e.dueDate);return m<=a&&a<f}));return i.a.createElement("div",{className:Object(j.a)(a.root)},i.a.createElement("style",{dangerouslySetInnerHTML:{__html:e.kanbanBoardState.activeBoard.calendarStyle}}),i.a.createElement("div",{className:Object(j.a)(a.calendarTitle)},i.a.createElement("div",{className:Object(j.a)(a.calendarTitleToolBar)},i.a.createElement(G.a,{onClick:function(a){return e.showToday()}},i.a.createElement(ne.a,null),i.a.createElement(Je.a,{variant:"caption",style:{marginLeft:"1em"}},"\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456")),i.a.createElement(G.a,{onClick:function(a){return e.showPreviousYear()}},i.a.createElement(bt.a,null)),i.a.createElement(G.a,{onClick:function(a){return e.showPreviousMonth()}},i.a.createElement(J.a,null)),i.a.createElement(G.a,{onClick:function(a){return e.showNextMonth()}},i.a.createElement(Q.a,null)),i.a.createElement(G.a,{onClick:function(a){return e.showNextYear()}},i.a.createElement(vt.a,null)),i.a.createElement(Je.a,{variant:"h6",display:"inline",style:{marginLeft:"2em"}},e.activeMonth.toLocaleDateString(navigator.userLanguage||navigator.language||navigator.browserLanguage||"en",{year:"numeric",month:"long"})),i.a.createElement(Je.a,{variant:"h6",display:"inline",style:{marginLeft:"3em",cursor:"pointer"},onClick:function(){var e=ct().getState();c(Object.assign({},o,{open:!0,title:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438 \u043d\u0430\u0437\u0432\u0443 \u0434\u043e\u0448\u043a\u0438",message:"",fieldLabel:"\u041d\u0430\u0437\u0432\u0430 \u0434\u043e\u0448\u043a\u0438",value:e.kanbanBoard.activeBoard.name}))}},e.kanbanBoardState.activeBoard.name))),i.a.createElement("table",{className:Object(j.a)(a.calendar)},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:Object(j.a)(a.calendarTopLeftHeader)}),i.a.createElement("th",{className:Object(j.a)(a.calendarSundayHeader)},"\u0421\u0431"),i.a.createElement("th",{className:Object(j.a)(a.calendarDaysHeader)},"\u041f\u043d"),i.a.createElement("th",{className:Object(j.a)(a.calendarDaysHeader)},"\u0412\u0442"),i.a.createElement("th",{className:Object(j.a)(a.calendarDaysHeader)},"\u0421\u0440"),i.a.createElement("th",{className:Object(j.a)(a.calendarDaysHeader)},"\u0427\u0442"),i.a.createElement("th",{className:Object(j.a)(a.calendarDaysHeader)},"\u041f\u0442"),i.a.createElement("th",{className:Object(j.a)(a.calendarSaturdayHeader)},"\u041d\u0434"))),i.a.createElement("tbody",null,g.map((function(t){return i.a.createElement("tr",{key:t[0].getTime()},i.a.createElement("td",{className:Object(j.a)(a.calendarCell)}),t.map((function(t,r){return i.a.createElement("td",{key:t.toISOString(),className:Object(j.a)(0===r||6===r?a.calendarWeekendCell:a.calendarCell)},i.a.createElement("div",{style:{position:"relative"}},i.a.createElement("div",{style:{position:"absolute",top:"0",right:"0"}},t.getDate()),i.a.createElement("div",{style:{paddingTop:"20px",minHeight:"80px"}},v.filter((function(e){var a=new Date(e.dueDate),r=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1);return t<=a&&a<r})).map((function(a){return i.a.createElement(St,{board:e.kanbanBoardState.activeBoard,key:a._id,record:a})})))))})))})))),o.open?i.a.createElement($e,{open:!0,title:o.title,message:o.message,fieldLabel:o.fieldLabel,value:o.value,validator:o.validator,onClose:o.onClose}):i.a.createElement(i.a.Fragment,null))})),Ot=t(100),Bt=(t(130),t(131),t(132),t(75)),xt=t.n(Bt);function At(e){return{name:e.name||"",taskStatuses:e.taskStatuses||[],teamOrStories:e.teamOrStories||[],tags:e.tags||[],displayBarcode:!!e.displayBarcode,displayMemo:!!e.displayMemo,displayFlags:!!e.displayFlags,displayTags:!!e.displayTags,preferArchive:!!e.preferArchive,boardStyle:e.boardStyle||"",calendarStyle:e.calendarStyle||"",records:e.records&&e.records.map((function(e){return a=e,Object.assign(a._id?{_id:a._id}:{},{dueDate:a.dueDate||"",taskStatus:a.taskStatus||"",teamOrStory:a.teamOrStory||"",flags:a.flags||[],tags:a.tags||[],description:a.description||"",barcode:a.barcode||"",memo:a.memo||""});var a}))||[]}}function Dt(e){if("string"!==typeof e.name)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 "name".');if(!e.taskStatuses||!Array.isArray(e.taskStatuses))throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u0435\u043d \u043c\u0430\u0441\u0438\u0432 \u0437\u043d\u0430\u0447\u0435\u043d\u044c "taskStatuses".');if(e.taskStatuses.forEach((function(e){if(null!==e.caption&&void 0!==e.caption&&"string"!==typeof e.caption)throw new Error('\u0437\u043c\u0456\u043d\u043d\u0430"taskStatuses[x].caption" \u043f\u043e\u0432\u0438\u043d\u043d\u0430 \u0431\u0443\u0442\u0438 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u044e.');if(null!==e.className&&void 0!==e.className&&"string"!==typeof e.className)throw new Error('\u0437\u043c\u0456\u043d\u043d\u0430 "taskStatuses[x].className" \u043f\u043e\u0432\u0438\u043d\u043d\u0430 \u0431\u0443\u0442\u0438 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u044e.');if(null!==e.completed&&void 0!==e.completed&&"boolean"!==typeof e.completed)throw new Error('\u0437\u043c\u0456\u043d\u043d\u0430 "taskStatuses[x].completed" \u043f\u043e\u0432\u0438\u043d\u043d\u0430 \u0431\u0443\u0442\u0438 \u0442\u0438\u043f\u0443 bool.');if("string"!==typeof e.value)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 "taskStatuses[x].value".')})),!e.teamOrStories||!Array.isArray(e.teamOrStories))throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u0435\u043d \u043c\u0430\u0441\u0438\u0432 \u0437\u043c\u0456\u043d\u043d\u0438\u0445 "teamOrStories".');if(e.teamOrStories.forEach((function(e){if(null!==e.caption&&void 0!==e.caption&&"string"!==typeof e.caption)throw new Error('\u0437\u043c\u0456\u043d\u043d\u0430 "teamOrStories[x].caption" \u043f\u043e\u0432\u0438\u043d\u043d\u0430 \u0431\u0443\u0442\u0438 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u044e.');if(null!==e.className&&void 0!==e.className&&"string"!==typeof e.className)throw new Error('\u0437\u043c\u0456\u043d\u043d\u0430 "teamOrStories[x].className" \u043f\u043e\u0432\u0438\u043d\u043d\u0430 \u0431\u0443\u0442\u0438 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u044e.');if("string"!==typeof e.value)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 "teamOrStories[x].value".')})),!e.tags||!Array.isArray(e.tags))throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u0435\u043d \u043c\u0430\u0441\u0438\u0432 \u0437\u043c\u0456\u043d\u043d\u0438\u0445 "tags".');if(e.tags.forEach((function(e){if(null!==e.className&&void 0!==e.className&&"string"!==typeof e.className)throw new Error('\u0437\u043c\u0456\u043d\u043d\u0430 "tags[x].className" \u043f\u043e\u0432\u0438\u043d\u043d\u0430 \u0431\u0443\u0442\u0438 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u044e.');if("string"!==typeof e.value)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 "tags[x].value".')})),"boolean"!==typeof e.displayBarcode)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 \u0442\u0438\u043f\u0443 bool "displayBarcode".');if("boolean"!==typeof e.displayMemo)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 \u0442\u0438\u043f\u0443 bool "displayMemo".');if("boolean"!==typeof e.displayFlags)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 \u0442\u0438\u043f\u0443 bool "displayFlags".');if("boolean"!==typeof e.displayTags)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 \u0442\u0438\u043f\u0443 bool "displayTags".');if("boolean"!==typeof e.preferArchive)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 \u0442\u0438\u043f\u0443 bool "preferArchive".');if("string"!==typeof e.boardStyle)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 "boardStyle".');if("string"!==typeof e.calendarStyle)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 "calendarStyle".');if(!e.records||!Array.isArray(e.records))throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u0435\u043d \u043c\u0430\u0441\u0438\u0432 \u0437\u043c\u0456\u043d\u043d\u0438\u0445 "records".');return e.records.forEach((function(e){return function(e){if("string"!==typeof e.dueDate)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 "dueDate".');if("string"!==typeof e.taskStatus)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430 \u0437\u043c\u0456\u043d\u043d\u0430"taskStatus".');if("string"!==typeof e.teamOrStory)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430 \u0437\u043c\u0456\u043d\u043d\u0430"teamOrStory".');if(!e.flags||!Array.isArray(e.flags))throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u0435\u043d \u043c\u0430\u0441\u0438\u0432 \u0437\u043c\u0456\u043d\u043d\u0438\u0445 "flags".');if(e.flags.forEach((function(e){if("string"!==typeof e)throw new Error('\u0437\u043c\u0456\u043d\u043d\u0430 "flags[x]" \u043f\u043e\u0432\u0438\u043d\u043d\u0430 \u0431\u0443\u0442\u0438 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u044e.')})),!e.tags||!Array.isArray(e.tags))throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u0435\u043d \u043c\u0430\u0441\u0438\u0432 \u0437\u043c\u0456\u043d\u043d\u0438\u0445 "tags".');if(e.tags.forEach((function(e){if("string"!==typeof e)throw new Error('\u0437\u043c\u0456\u043d\u043d\u0430"tags[x]" \u043f\u043e\u0432\u0438\u043d\u043d\u0430 \u0431\u0443\u0442\u0438 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u044e.')})),"string"!==typeof e.description)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 "description".');if("string"!==typeof e.barcode)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 "barcode".');if("string"!==typeof e.memo)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430 \u0437\u043c\u0456\u043d\u043d\u0430 "memo".');return e}(e)})),e}t(215);var Ct=Object(D.a)((function(e){return{root:{flexGrow:1,color:"var(--main-text-color)",backgroundColor:"var(--main-bg-color)",width:"100%",height:"100%"},header:{height:"45px",position:"relative"},codemirror:{display:"grid",width:"calc(100% - 20px)",height:"calc(100vh - 65px)"},fabSave:{position:"absolute",margin:e.spacing(1),left:e.spacing(1),top:e.spacing(1)/10},fabDelete:{position:"absolute",margin:e.spacing(1),right:e.spacing(1),top:e.spacing(1)/10}}})),jt=Object(d.c)(Ne,Te)((function(e){var a=Ct(),t=Object(He.a)(),r=i.a.useState(!1),n=Object(H.a)(r,2),o=n[0],c=n[1],s=i.a.useState(""),l=Object(H.a)(s,2),d=l[0],u=l[1],m=i.a.useState(0),p=Object(H.a)(m,2),f=p[0],g=p[1];if(e.match.params.id&&e.activeBoard._id!==e.match.params.id){var b=e.boards.findIndex((function(a){return a._id===e.match.params.id}));return e.changeActiveBoard(e.match.params.id),i.a.createElement("div",{className:a.root},b<0?i.a.createElement(i.a.Fragment,null,i.a.createElement(Je.a,{style:{marginTop:t.spacing(10)},variant:"h4",align:"center"},"\u041d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0434\u043e\u0448\u043a\u0443."),i.a.createElement(Je.a,{style:{marginTop:t.spacing(5),cursor:"pointer",textDecoration:"underline"},variant:"body1",align:"center",onClick:function(a){e.history.push("/")}},"\u041d\u0430\u0436\u043c\u0456\u0442\u044c \u0441\u044e\u0434\u0438, \u0449\u043e\u0431 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044c \u043d\u0430\u0437\u0430\u0434.")):i.a.createElement(i.a.Fragment,null))}return i.a.createElement("div",{className:Object(j.a)(a.root)},i.a.createElement("div",{className:Object(j.a)(a.header)},i.a.createElement(Je.a,{variant:"h6",align:"center",style:{marginTop:"0px"}},e.activeBoard.name),i.a.createElement(Ie.a,{className:Object(j.a)(a.fabSave),variant:"contained",color:"primary",disabled:0===f,onClick:function(){try{var a=xt.a.safeLoad(d);a&&(Dt(a),e.editBoardAndStikeys(Object.assign({},a,{_id:e.activeBoard._id})))}catch(t){e.showAlertDialog({open:!0,title:"Error",message:t.message||String(t),singleButton:!0,colorIsSecondary:!0,onClose:function(){return e.closeAlertDialog()}})}}},i.a.createElement(We.a,null),i.a.createElement(Je.a,{variant:"body1",style:{marginLeft:t.spacing(1)}},"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438")),e.boards.length>1?i.a.createElement(Ie.a,{className:Object(j.a)(a.fabDelete),variant:"outlined",color:"secondary",onClick:function(e){return c(!0)}},i.a.createElement(pa.a,{color:"secondary"}),i.a.createElement(Je.a,{variant:"body1",color:"secondary",style:{marginLeft:t.spacing(1)}},"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438")):i.a.createElement(i.a.Fragment,null)),i.a.createElement("div",null,i.a.createElement(Ot.UnControlled,{className:Object(j.a)(a.codemirror),value:"# \u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f\n\n".concat(xt.a.safeDump(At(e.activeBoard),{lineWidth:1e3})),options:{mode:"yaml",theme:"material",lineNumbers:!0,lineWrapping:!0},onChange:function(e,a,t){u(t),g(f+1)}})),o?i.a.createElement(fa,{open:o,title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0434\u043e\u0448\u043a\u0443",message:"\u0412\u0438 \u0432\u043f\u0435\u0432\u043d\u0435\u043d\u0456, \u0449\u043e \u0445\u043e\u0447\u0435\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0434\u043e\u0448\u043a\u0443?",colorIsSecondary:!0,applyButtonCaption:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",confirmingTextLabel:'\u0412\u0432\u0435\u0434\u0456\u0442\u044c "\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438" \u0434\u043b\u044f \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u0446\u0456\u0454\u0457 \u0434\u043e\u0448\u043a\u0438.',confirmingTextValue:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",fab:i.a.createElement(la.a,{size:"large",variant:"round","aria-label":"delete",color:"secondary",style:{margin:"auto"}},i.a.createElement(pa.a,null)),onClose:function(a){c(!1),a&&e.deleteBoard(e.activeBoard._id)}}):i.a.createElement(i.a.Fragment,null))})),Tt=(t(216),Object(D.a)((function(e){return{root:{flexGrow:1,color:"var(--main-text-color)",backgroundColor:"var(--main-bg-color)",width:"100%",height:"100%"},header:{height:"45px",position:"relative"},codemirror:{display:"grid",width:"calc(100% - 20px)",height:"calc(100vh - 65px)"},fabSave:{position:"absolute",margin:e.spacing(1),left:e.spacing(1),top:e.spacing(1)/10},fabDelete:{position:"absolute",margin:e.spacing(1),right:e.spacing(1),top:e.spacing(1)/10}}}))),Nt=Object(d.c)(K,Y)((function(e){var a,t=Tt(),r=Object(He.a)(),n=i.a.useState(!1),o=Object(H.a)(n,2),c=o[0],s=o[1],l=i.a.useState(""),d=Object(H.a)(l,2),u=d[0],m=d[1],p=i.a.useState(0),f=Object(H.a)(p,2),g=f[0],b=f[1];return i.a.createElement("div",{className:Object(j.a)(t.root)},i.a.createElement("div",{className:Object(j.a)(t.header)},i.a.createElement(Je.a,{variant:"h6",align:"center",style:{marginTop:"0px"}},"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u0434\u043e\u0434\u0430\u0442\u043a\u0443"),i.a.createElement(Ie.a,{className:Object(j.a)(t.fabSave),variant:"contained",color:"primary",disabled:0===g,onClick:function(){try{var a=xt.a.safeLoad(u);if(!a)throw new Error("error.");!function(e){if(!e.remote)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f "remote".');if("string"!==typeof e.remote.endpointUrl)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f "remote.endpointUrl".');if("string"!==typeof e.remote.user)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f "remote.user".');if("string"!==typeof e.remote.password)throw new Error('\u043f\u043e\u0442\u0440\u0456\u0431\u043d\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f "remote.password".')}(a),e.updateAppConfig(Object.assign({},a))}catch(t){e.showAlertDialog({open:!0,title:"Error",message:t.message||String(t),singleButton:!0,colorIsSecondary:!0,onClose:function(){return e.closeAlertDialog()}})}}},i.a.createElement(We.a,null),i.a.createElement(Je.a,{variant:"body1",style:{marginLeft:r.spacing(1)}},"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438")),i.a.createElement(Ie.a,{className:Object(j.a)(t.fabDelete),variant:"outlined",color:"secondary",onClick:function(e){return s(!0)}},i.a.createElement(pa.a,{color:"secondary"}),i.a.createElement(Je.a,{variant:"body1",color:"secondary",style:{marginLeft:r.spacing(1)}},"\u041f\u0435\u0440\u0435\u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0434\u043e\u0434\u0430\u0442\u043e\u043a"))),i.a.createElement("div",null,i.a.createElement(Ot.UnControlled,{className:Object(j.a)(t.codemirror),value:"# App settings\n\n".concat(xt.a.safeDump((a=e.appConfig,{remote:{endpointUrl:a.remote&&a.remote.endpointUrl?a.remote.endpointUrl:"",user:a.remote&&a.remote.user?a.remote.user:"",password:a.remote&&a.remote.password?a.remote.password:""}}),{lineWidth:1e3})),options:{mode:"yaml",theme:"material",lineNumbers:!0,lineWrapping:!0},onChange:function(e,a,t){m(t),b(g+1)}})),c?i.a.createElement(fa,{open:c,title:"\u041f\u0435\u0440\u0435\u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0434\u043e\u0434\u0430\u0442\u043e\u043a",message:"\u0412\u0438 \u0432\u043f\u0435\u0432\u043d\u0435\u043d\u0456, \u0449\u043e \u0445\u043e\u0447\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0434\u043e\u0434\u0430\u0442\u043e\u043a, \u0443\u0441\u0456 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0456 \u0437\u043c\u0456\u043d\u043d\u0456 \u0431\u0443\u0434\u0435 \u0437\u043d\u0438\u0449\u0435\u043d\u043e!",colorIsSecondary:!0,applyButtonCaption:"\u041f\u0435\u0440\u0435\u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438",confirmingTextLabel:'\u0412\u0432\u0435\u0434\u0456\u0442\u044c"\u041f\u0435\u0440\u0435\u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438" \u0434\u043b\u044f \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f .',confirmingTextValue:"\u041f\u0435\u0440\u0435\u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438",fab:i.a.createElement(la.a,{size:"large",variant:"round","aria-label":"reset application",color:"secondary",style:{margin:"auto"}},i.a.createElement(pa.a,null)),onClose:function(a){s(!1),a&&e.resetApplication()}}):i.a.createElement(i.a.Fragment,null))})),It=Object(D.a)((function(e){return{app:{display:"flex"}}})),_t=Object(d.c)(K,Y)((function(e){var a=It();return i.a.createElement("div",{className:Object(j.a)(a.app)},i.a.createElement(A.a,null),i.a.createElement(C.a,{theme:F},i.a.createElement(Xe,null),i.a.createElement(x.c,null,i.a.createElement(x.a,{path:"/",exact:!0,component:ft}),i.a.createElement(x.a,{path:"/kanban/:id?",component:ft}),i.a.createElement(x.a,{path:"/calendar/:id?",component:wt}),i.a.createElement(x.a,{path:"/edit/:id?",component:jt}),i.a.createElement(x.a,{path:"/config/",component:Nt})),e.alertDialog.open?i.a.createElement(fa,e.alertDialog):i.a.createElement(i.a.Fragment,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(),e.t0=l.a,e.t1=i.a,e.t2=d.a,e.next=6,it();case 6:e.t3=e.sent,e.t4={store:e.t3},e.t5=i.a.createElement(u.a,{history:nt},i.a.createElement(_t,null)),e.t6=e.t1.createElement.call(e.t1,e.t2,e.t4,e.t5),e.t7=document.getElementById("root"),e.t0.render.call(e.t0,e.t6,e.t7),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}));case 13:case"end":return e.stop()}}),e)})))()}},[[170,1,2]]]);
//# sourceMappingURL=main.c9ab6e3c.chunk.js.map